{% extends 'base.html' %}
{% block content %}

<h1>Transaction Analysis</h1>


<div id="transaction_categories" style="width:800px; height:400px;"></div>

<script>

    var categories = {{ categories|tojson|safe }};
    categories = JSON.parse(categories)
    console.log(categories)
    
    var category_array = [];
    var amounts = [];

    _.each(categories, function(value, key) {
        category_array.push(key);
        amounts.push(value);
    });
    console.log(category_array)

    $('#transaction_categories').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: 'Your spending categories'
        },
        xAxis: {
            categories: category_array
        },
        credits: {
            enabled: false
        },
        series: [{
            data: amounts
        }]
    });













            // console.log(result);
            // var coordinates = []
            // var total_progress = 0
            // console.log(result.progress_updates)
            // _.each(result.progress_updates, function(update) {
            //     total_progress = total_progress + update.update_amt
            //     var updated_at = update.updated_at
            //     updated_at = new Date(updated_at)
            //     console.log(updated_at)
            //     time = Date.UTC(updated_at.getFullYear(), 
            //                     updated_at.getMonth(), 
            //                     updated_at.getDate())
            //     coordinates.push([time, total_progress])
            // });

</script>

{% endblock %}